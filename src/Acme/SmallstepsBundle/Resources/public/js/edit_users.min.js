$(document).ready(function(){$("#add_user").on("click",function(){$("#add_user").hide();$("#edit_user").load("add_user.php?&jq=true",function(){$(this).fadeIn(400,function(){var a=$(this).offset().top;$("html, body").animate({scrollTop:a},800)})});return false});$("a#cancel").on("click",function(){$(".user_edit_section").fadeOut();return true});$(".edit").on("click",function(){$("#add_user").hide();var a=$(this).parent().parent().data("id");$("#edit_user").load("edit_user.php?id="+a+"&jq=true",function(){$(this).fadeIn(400,function(){var b=$(this).offset().top;$("html, body").animate({scrollTop:b},800)})});return false});$("#delete_account").on("click",function(){perform_task($(this));return false});$("#reset_password").on("click",function(){perform_task($(this));return false});$("#create").on("click",function(){var e=$("input[name=firstname]").val(),g=$("input[name=lastname]").val(),d=$("input[name=username]").val(),h=$("input[name=email]").val(),f=$("input[name=redirect]").val(),i=$("input[name=password]").val(),a=$("#feedback"),c=$("#status").val(),b=$("input[name=csrf_field]").val();a.fadeOut();if(e===""||g===""||d===""||h===""||f===""){a.addClass("error alert").text("Please fill out all required fields.").fadeIn();nice_scroll();return false}$.ajax({type:"POST",url:"process.php",dataType:"json",data:{firstname:e,lastname:g,username:d,email:h,redirect:f,password:i,status:c,task:"create_from_admin",csrf_field:b},success:function(j){a.removeClass().addClass((j.error===true)?"alert error":"alert success").text(j.message).fadeIn();if(j.error===false){location.href="manage_users.php"}else{nice_scroll()}}});return false});$("#update_profile").on("click",function(){var e=$("input[name=firstname]").val(),g=$("input[name=lastname]").val(),d=$("input[name=username]").val(),h=$("input[name=email]").val(),f=$("input[name=redirect]").val(),i=$("input[name=password]").val(),b=$("#feedback"),c=$("input[name=id]").val(),a=$("input[name=csrf_field]").val();b.fadeOut();if(c===""||e===""||g===""||d===""||h===""||f===""){b.addClass("error alert").text("Please fill out all required fields.").slideToggle();return false}$.ajax({type:"POST",url:"process.php",dataType:"json",data:{task:"user_update_profile",id:c,csrf_field:a,firstname:e,lastname:g,username:d,email:h,password:i},success:function(j){b.removeClass().addClass((j.error===true)?"alert error":"alert success").text(j.message).slideToggle();nice_scroll()}});return false});$("#save").on("click",function(){var f=$("input[name=firstname]").val(),h=$("input[name=lastname]").val(),e=$("input[name=username]").val(),i=$("input[name=email]").val(),g=$("input[name=redirect]").val(),j=$("input[name=password]").val(),b=$("#feedback"),c=$("input[name=id]").val(),a=$("input[name=csrf_field]").val(),d=$("#status").val();b.fadeOut();if(c===""||e===""||i===""||g===""){nice_scroll();b.removeClass().addClass("alert error").text("Please fill out the required fields!").slideToggle();return false}$.ajax({type:"POST",url:"process.php",dataType:"json",data:{id:c,csrf_field:a,status:d,firstname:f,lastname:h,username:e,email:i,redirect:g,password:(j==="")?"":j,task:"update_user_from_admin"},success:function(k){nice_scroll();b.removeClass().addClass((k.error===true)?"alert error":"alert success").text(k.message).slideToggle();if(k.error===false){location.href="manage_users.php"}}});return false})});function nice_scroll(){$("body, html").animate({scrollTop:0},800);return false}function perform_task(d){var e=d.attr("href"),b=$("input[name=csrf_field]").val(),c=$(this),a=$("#feedback");a.fadeOut();if(confirm("Are you sure? This action can't be undone!")){$.ajax({type:"POST",url:"process.php",dataType:"json",data:{edit_or_delete:e,csrf_field:b},success:function(f){a.removeClass().addClass((f.error===true)?"alert error":"alert success").text(f.message).slideToggle();nice_scroll();if(f.redirect){location.href=f.redirect}}})}};